/* Basic styles matching current index.html structure */
:root {
  --wa-bg: #d2e1fb;
  --wa-card-bg: #def7ff45;
  --wa-text: #1f2933;
  --wa-muted-text: #4b5563;
  --wa-border: #cbd5f0;
  --wa-header-bg: #e5edf9;
  --wa-input-bg: #ebebeb;
  --wa-input-border: #b5a1ff;
  --wa-label: #243b53;
}

body { font-family: Arial, sans-serif; margin: 20px; background: var(--wa-bg); color: var(--wa-text); }
h1 { text-align: center; color: #ffffff; }
label { display:inline-block; margin-bottom:2px; color: var(--wa-label); font-weight:500; }
section { margin-bottom: 18px; }
table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
th, td { border: 1px solid #ccc; padding: 6px; text-align: left; }
input[type="text"], input[type="email"], input[type="number"], input[type="date"], textarea, select {
  width: 98%; padding: 6px; box-sizing: border-box;
}
.materials-table th, .materials-table td { border: 1px solid #ddd; }
.actions { margin-top: 12px; }
.result { white-space: pre-wrap; background:#f1f5ff; padding:10px; border:1px solid var(--wa-border); }
.floor-pad { font-weight: 700; font-size: 1.1em; }

/* Small helper for remove button */
.remove-row { background: #f8d7da; border: 1px solid #f5c2c7; color: #842029; padding: 2px 6px; cursor: pointer; }
.remove-row:hover { opacity: 0.9; }

/* Make table headers stand out */
thead th { background: var(--wa-header-bg); color: var(--wa-label); border-color: var(--wa-border); }

/* Info button and tooltip for chimney code */
.info-btn { background:#007acc; color:white; border:none; border-radius:3px; width:22px; height:22px; cursor:pointer; }
.info-btn:focus { outline:2px solid #005a9e; }
.tooltip { margin-top:6px; padding:8px; border:1px solid #ddd; background:#fffefc; font-size:0.95em; }
.tooltip table { width:100%; border-collapse: collapse; margin-top:6px; }
.tooltip td { border: none; padding:4px 6px; }

/* Responsive improvements: form centered, inputs/table wrap and scroll on small screens */
#woodAppForm { max-width: 980px; margin: 0 auto; background: var(--wa-card-bg); padding: 16px 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08); }

/* allow table cells to wrap text instead of overflowing */
th, td { white-space: normal; overflow-wrap: break-word; word-break: break-word; }

/* make form controls adapt to container width */
input[type="text"], input[type="email"], input[type="number"], input[type="date"], textarea, select {
  width: 100%;
  max-width: 100%;
  padding: 6px;
  box-sizing: border-box;
  background: var(--wa-input-bg);
  border: 1px solid var(--wa-input-border);
  border-radius: 3px;
  color: var(--wa-text);
}

/* ensure tables can scroll horizontally on small screens */
@media (max-width: 700px) {
  .materials-table, #clearancesTable {
    display: block;
    width: 100%;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Actions/buttons layout for small screens */
.actions { margin-top: 12px; display: flex; gap: 8px; align-items: center; }
.actions button { padding: 8px 12px; }

/* Place the Reset button on the right side of the actions bar */
.actions #resetBtn { margin-left: auto; }

/* On small screens (stacked buttons) make the reset button stretch full width */
@media (max-width: 700px) {
  .actions #resetBtn { margin-left: 0; align-self: stretch; }
}

/* smaller devices: stack buttons, reduce paddings and font sizes */
@media (max-width: 700px) {
  body { margin: 10px; }
  .actions { flex-direction: column-reverse; }
  .actions button { width: 100%; }
  th, td { font-size: 13px; padding: 8px; }
  h1 { font-size: 20px; }
}

@media (min-width: 701px) and (max-width: 1100px) {
  th, td { font-size: 14px; }
}

/* Make sure long selects/inputs don't overflow in table cells */
td input, td select, td textarea { box-sizing: border-box; max-width: 100%; }

/* Stack appliance table rows on narrow screens so each field is visible */
@media (max-width: 700px) {
  .materials-table thead { display: none; }
  .materials-table tbody tr { display: block; border: 1px solid #e6eef9; padding: 10px; margin-bottom: 10px; background: #fcfeff; }
  .materials-table tbody td { display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; }
  .materials-table tbody td:before { content: attr(data-label); font-weight: 600; color: #1f2933; margin-right: 8px; flex: 0 0 42%; }
  .materials-table tbody td > * { flex: 1 1 auto; }
  .materials-table tbody td select, .materials-table tbody td input { width: 100%; }
}

@media (max-width: 700px) {
  body.dark-mode .materials-table tbody td:before { content: attr(data-label); font-weight: 600; color: #d6d6d6; margin-right: 8px; flex: 0 0 42%; }
}

/* Modal styles */
.modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); align-items:center; justify-content:center; z-index:1000; }
.modal[aria-hidden="false"] { display:flex; }
.modal-content { background:#fff; padding:18px; border-radius:6px; max-width:480px; width:90%; box-shadow:0 6px 24px rgba(0,0,0,0.2); }
.modal-actions { display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
.modal .danger { background:#e05353; color:white; border:none; padding:8px 12px; border-radius:4px; }
.modal button { padding:8px 12px; border-radius:4px; }

/* Row state colors for clearances */
.row-positive { background: #c1fcc1 !important; }
.row-negative { background: #fcc6b7 !important; }
.row-caution { background: #fae5b0 !important; }

/* Dark mode styles */
body.dark-mode { background:#0f1720; color:#e6eef6; }
body.dark-mode section:first-of-type label { color: #ffffff; }
body.dark-mode table { border-color: #233044; }
body.dark-mode th, body.dark-mode td { border-color:#223241; }
body.dark-mode thead th { background:#172635; color:#e6eef6; }
body.dark-mode .materials-table tbody tr { background:#0b1520; }
body.dark-mode .modal-content { background:#0f1720; color:#e6eef6; border:1px solid #233044; }
/* Dark-mode form controls: slightly darker inputs for comfortable contrast */
body.dark-mode input, body.dark-mode select, body.dark-mode textarea {
  background: #0f2230;
  color: #e6eef6;
  border: 1px solid #234354;
}
body.dark-mode input::placeholder, body.dark-mode textarea::placeholder {
  color: #a3bf9f;
}

/* Adjust control appearance in table cells for dark mode */
body.dark-mode td input, body.dark-mode td select, body.dark-mode td textarea {
  background: #01406d !important;
  color: #fce5e8;
  border: 1px solid #0282d8;
}

/* Ensure materials-table inputs match */
body.dark-mode .materials-table td input, 
body.dark-mode .materials-table td select, 
body.dark-mode .materials-table td textarea {
  background: #01406d !important;
  color: #fce5e8;
  border: 1px solid #0282d8;
}

/* Dark-mode variants for clearance row states (darker so light text remains readable) */
body.dark-mode .row-positive { background: #143a1e !important; color: #dff6df !important; }
body.dark-mode .row-negative { background: #3b1515 !important; color: #ffd6d1 !important; }
body.dark-mode .row-caution { background: #3b3316 !important; color: #fff3cf !important; }

/* Combobox (input + dropdown) for Manufacturer field */
.combo-wrapper { position: relative; display: inline-flex; align-items: stretch; width: 100%; }
.combo-wrapper .combo-toggle { background: #eef3fb; border: 1px solid #c8d8f0; padding: 0 8px; cursor: pointer; margin-left: 6px; border-radius: 3px; }
.combo-wrapper .combo-toggle:focus { outline: 2px solid #9cc0ff; }
.combo-wrapper input[type="text"] { flex: 1 1 auto; z-index: 2; position: relative; }
.combo-list { position: absolute; left: 0; right: 0; top: calc(100% + 6px); z-index: 9999; background: white; border: 1px solid #c8d8f0; max-height: 220px; overflow: auto; box-shadow: 0 6px 18px rgba(29,41,66,0.12); display: none; list-style: none; padding: 4px 0; }
.combo-wrapper.open .combo-list { display: block; }
.combo-list .combo-item { padding: 6px 10px; cursor: pointer; }
.combo-list .combo-item:hover, .combo-list .combo-item.active { background: #e9f2ff; }

/* dark mode combobox */
body.dark-mode .combo-list { background: #0b2236; border-color: #234354; color: #e6eef6; }
body.dark-mode .combo-list .combo-item:hover, body.dark-mode .combo-list .combo-item.active { background: #07324b; }

